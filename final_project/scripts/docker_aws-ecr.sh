# change output to the desired repository id (e.g. 763104351884)
aws ecr get-login

# login to repository
# token is good only for 12 hours
docker login -u AWS -p eyJwYXlsb2FkIjoiN29zSEZQRVloUkxKbnozZDhGcmhVTDcya1p3Q0dzVUoxNDJZUWhZVW5TbzBqRXkrdzNZTnZudDVaaG5LTll6ZHJXUDdKWEEyQW5DaUIrQ0c4eXR2U1lncnJJOXNpNFM0Q00veXdqUkpnejFpbHhUQXZlcDNua3JUL01ZMGRNZVBFYUJZc1VuSEUxMHpQbG9TeFhzVndWU24vUmJ1WVZKVFdPckhvUm5uOXRJRW1hZURDcnpBZFRzMEQrMTNRb091QXFTdXEyemZuT2FSQU93QVlLcFNVQmw3UzRZSWVYUmlEbVE4NEdoN2RsTlpGbFNvRnBaRHNubkVWcS92UllqT1JScXpwVTlGc3plM2pscUVQUWREbkRjVlFKMDRQNWs3MHA4b3RzZ3VhNVdndWM2WjhDZWdCaE1wZkVrTHl2K2F2THd4WjFOVXIveGVyUlhzRkZ1V3JxdWtuQytYQUswMXJ5UVROTEZGTWxIVHJ6SDZqanVEOFlpR3cwU1Q5QW9qYTArYnhMeTJqcU1lOUZwR0dTQWU3WW9YYzBFS2RNcmdvMm1BeEJoUCtlRlIrTTh4dWpKL2hhQW5yUVdEUFR0V2ZhTlNIL1UzcWN4UEZFSzBEWDRRTlhNc3dwYUdkKy94ZnNjb3lqOVZ5aTBzQWhoQ0ZWS2hRZXZURFZwb21GZWVhTHRYaW9JRXpSK0pLY0VDRWhXRTdZRmk4enJTQmhodEdxNHVlMFlPY2lrcXpFMXlDYzJoVTdaT2MvUTRBYUpWSzFnbHFYd2o5Q2lMK0IvL2lRRXlLcFdwdFFzNzlXS0pqUE12M0FZdDk3WDVpZ2NhOTJiWFNGWVlyUXhhTzBCajBFRmd4OEZYc3ZMUWRpR08zcXRCNDVoNG9kaG9HTDUySnlFc012NStac24wS0VHYUNYbVU5UGZZYW9yaHAzclJxL2pCK2xGS2JUSU41alhONXZoT0xVbUkzSHVncXd2WWlIWGhpVDV4bUMwM1ViSE5RY0hxWVlMT2ZYaytjUG1GOXcwWWMwdTN2N0k1Vy81a2g4S2V0Sk9OdEZlSTFyaGY5b3ZQNDQxaXZjMmZnaFZzODBuQnhWSFJmRFJHNkpITDRHMUtsOHgzS21MQzdralRLWFUyNStzZ1dxeWU3RkxsNDhFZXVIOTRYZUI0NGRHODBTN1l0Wll3N3BXNTFzTGMvdWhZaTN5WFNsTUpvZjJwMmFGNWIwL0oyRE9tSmdEaFNZQWtjUnE3L0hhTFhQdDdYSWFraEdwdTNsbjg0NC9JdW96MHk1OVZSTFo4MWFDYUh0UHpiVHJTWk5memZNSUVHWFJFMzVNTDZBdEduT1pMTy94VnJ5eHFRdTZxRWJEckdPZWx3N1pIM1BURlRFYmFpdHMyWVBuYWRUaFVDK3VwRmhDRWg5VmR2V094VnRsK1lqb0ZpOFJlb0M5K3kxeDZqRjE5ZlI4M1ZOeFUvQ1dKMUZnOXNYZzUyN3ZzNFBIQmk5U0J6d09LRlB5WW5qVkRVNEgyV3QrUzFzMk0xaXhVUDFWMGFmVjd0WWxoVzdCb1doYWVDcnJuU0xMR0tnPT0iLCJkYXRha2V5IjoiQVFFQkFIaHdtMFlhSVNKZVJ0Sm01bjFHNnVxZWVrWHVvWFhQZTVVRmNlOVJxOC8xNHdBQUFINHdmQVlKS29aSWh2Y05BUWNHb0c4d2JRSUJBREJvQmdrcWhraUc5dzBCQndFd0hnWUpZSVpJQVdVREJBRXVNQkVFREtxRUVNN2dTbFBVZmFuMFNnSUJFSUE3UFQ3bUFKZ01VT3hFUGlWZ2ZaMHpFbyt1TmFyTWMrRGY1c0hVL3U2eHFtMVcxUEZaWjFGS3RrTnQzTTVZYndyc0p4OXoyaGVPa0NORDRMVT0iLCJ2ZXJzaW9uIjoiMiIsInR5cGUiOiJEQVRBX0tFWSIsImV4cGlyYXRpb24iOjE1OTA5MDg0Njl9 https://763104351884.dkr.ecr.us-east-1.amazonaws.com

# pull image
docker pull 763104351884.dkr.ecr.us-east-1.amazonaws.com/pytorch-training:1.5.0-gpu-py36-cu101-ubuntu16.04

# push an image from local machine to ECR
docker push <image-id> 833299475631.dkr.ecr.us-east-1.amazonaws.com/<repository:tag>
